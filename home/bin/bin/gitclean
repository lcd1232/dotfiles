#!/usr/bin/env bash
# Clean local branches that already merged in "master" branch
set -e
set -u
set -o pipefail

# Source - https://stackoverflow.com/a/33548037
git fetch -p
for branch in $(git for-each-ref --format '%(refname) %(upstream:track)' refs/heads | awk '$2 == "[gone]" {sub("refs/heads/", "", $1); print $1}'); do
  git branch -D "$branch"
done
